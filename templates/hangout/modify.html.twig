{% extends 'base.html.twig' %}

{% block body %}

    <h2>Modification de la sortie {{ hangout.name }}</h2>

    <div>
        {{ form_start(formUpdate) }}
        <div class="grid">
            <div>
                {{ form_row(formUpdate.name) }}
                {{ form_row(formUpdate.startingDateTime) }}
                {{ form_row(formUpdate.lastSubmitDate) }}
                {{ form_row(formUpdate.detail) }}

            </div>
            <div>
                {{ form_row(formUpdate.campus) }}
                {{ form_row(formUpdate.maxParticipant) }}
                {{ form_row(formUpdate.length) }}
                {{ form_label(formUpdate.location) }}
                <div class="grid" style="grid-template-columns: 2fr 1fr">

                    {{ form_widget(formUpdate.location) }}

                    <div type="button" id="showModalBtn" class="btn-add-location" >Ajouter un lieu</div>
                </div>
                <div class="grid" style="grid-template-columns: repeat(3, 1fr)">
                {{ form_row(formUpdate.save, {'attr' : {'class' : 'hidden'}}) }}
                {{ form_row(formUpdate.publish, {'attr' : {'class':'btn-publish'}}) }}
                {{ form_row(formUpdate.delete, {'attr' : {'class':'btn-delete'}}) }}
                </div>

                {{ form_end(formUpdate) }}
            </div>
        </div>
    </div>
    <div id="placeModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" type="button">&times;</button>
            {{ include('places/add.html.twig') }}
        </div>
    </div>


{% endblock %}

{% block title %}

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const modal = document.getElementById('placeModal');
            const openBtn = document.getElementById('showModalBtn');
            const closeBtn = modal.querySelector('.modal-close');

            // Open modal
            openBtn.addEventListener('click', () => {
                modal.classList.add('show');
            });

            // Close modal on button click
            closeBtn.addEventListener('click', () => {
                modal.classList.remove('show');
            });

            // Close modal on outside click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('show');
                }
            });
        });

    </script>
{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    <style>

        .modal {
            display: none; /* hidden by default */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6); /* semi-transparent black */
            z-index: 1000;

            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            min-width: 300px;
            max-width: 600px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        main ul {

            border-radius: 4px;
            border: 1px solid #9e473b;
            padding: 4px 6px ;
        }
        main ul > li {
            color: #9e473b;
            list-style: none;

        }
        main ul > li::before {
            content: 'âš ';
        }

        .btn-delete {
            background: #e74c3c ;
            border: 1px solid #e74c3c ;
        }

        .btn-publish {
            background: #1b9448 ;
            border: 1px solid #1b9448 ;
        }

        .btn-add-location {
            background: #5c636a ;
            border: 1px solid #5c636a;
        }
    </style>
{% endblock %}