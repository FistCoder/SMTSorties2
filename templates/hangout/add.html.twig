{% extends 'base.html.twig' %}

{% block stylesheets %}
    <style>

.modal {
    display: none; /* hidden by default */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6); /* semi-transparent black */
    z-index: 1000;

    align-items: center;
    justify-content: center;
}

.modal.show {
    display: flex;
}

.modal-content {
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    min-width: 300px;
    max-width: 600px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.3);
    position: relative;
}

.modal-close {
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
}

main ul {

    border-radius: 4px;
    border: 1px solid #9e473b;
    padding: 4px 6px ;
}
main ul > li {
    color: #9e473b;
    list-style: none;

}
main ul > li::before {
    content: 'âš ';
}
</style>
{% endblock %}
{% block title %}
    Ajouter une sortie |
    {{ parent() }}
{% endblock %}
{% block body %}
    <div class="container">
        <h2>Ajouter une sortie!</h2>
        <section class="grid">
            <div>
                {{ form_start(formHangout) }}
                {{ form_row(formHangout.name) }}
                {{ form_row(formHangout.startingDateTime) }}
                {{ form_row(formHangout.lastSubmitDate) }}
                {{ form_row(formHangout.detail) }}
            </div>
            <div>
                {{ form_row(formHangout.length) }}
                {{ form_row(formHangout.maxParticipant) }}
                {{ form_label(formHangout.location) }}
                <div class="grid">

                    {{ form_widget(formHangout.location) }}

                    <div type="button" id="showModalBtn" onclick="showModal()">Ajouter un lieu</div>
                </div>

                {{ form_row(formHangout.save) }}
                {{ form_row(formHangout.publish) }}
                {{ form_row(formHangout.delete) }}

                {{ form_end(formHangout) }}

                <div id="placeModal" class="modal">
                    <div class="modal-content">
                        <button class="modal-close" type="button">&times;</button>
                        {{ include('places/add.html.twig') }}
                    </div>
                </div>
            </div>
        </section>


    </div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const modal = document.getElementById('placeModal');
            const openBtn = document.getElementById('showModalBtn');
            const closeBtn = modal.querySelector('.modal-close');

            // Open modal
            openBtn.addEventListener('click', () => {
                modal.classList.add('show');
            });

            // Close modal on button click
            closeBtn.addEventListener('click', () => {
                modal.classList.remove('show');
            });

            // Close modal on outside click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('show');
                }
            });
        });

    </script>
{% endblock %}